<?xml version="1.0" encoding="UTF-8"?>
<!--
Copyright 2019 Dell, Inc.  

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
--> 

<CLISH_MODULE
    xmlns="http://www.dellemc.com/sonic/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:schemaLocation="http://www.dellemc.com/sonic/XMLSchema
                        http://www.dellemc.com/sonic/XMLSchema/clish.xsd"
    >
    <!--=======================================================-->

<VIEW name="configure-router-bgp-l2vpn-view" prompt="${SYSTEM_NAME}(config-router-bgp-af)# " depth="3">
  <NAMESPACE ref="configure-view" help="false" completion="false" />
  <NAMESPACE ref="configure-router-bgp-view" help="false" completion="false" />
  <COMMAND name="redistribute" help="Redistribute information from another routing protocol">
    <PARAM name="protocol" help="protocol" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="connected" help="Connected Routes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="static" help="Static Routes" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <PARAM name="route-map" help="Route-map reference" mode="subcommand" ptype="SUBCOMMAND" optional="true">
      <PARAM name="route-map-name" help="Route map name" ptype="STRING"/>
    </PARAM>
    <ACTION> if test -n "${route-map-name}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_network_instance_network_instances_network_instance_table_connections_table_connection_config_import_policy ${vrf-name} L2VPN_EVPN ${protocol} ${route-map-name}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_network_instance_network_instances_network_instance_table_connections_table_connection_config ${vrf-name} L2VPN_EVPN ${protocol}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
    <COMMAND name="maximum-paths" help="Forward packets over multiple paths">
      <PARAM name="paths" help="Number of paths" ptype="RANGE_1_256"/>
      <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_network_instance1348121867 ${vrf-name} L2VPN_EVPN ${paths}</ACTION>
    </COMMAND>
    <COMMAND name="maximum-paths ibgp" help="iBGP-multipath">
       <PARAM name="ipaths" help="Number of paths" ptype="RANGE_1_256">
         <PARAM name="equal-cluster-length" help="Match the cluster length" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
       </PARAM>
       <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_network_instance1543452951 ${vrf-name} L2VPN_EVPN ${ipaths}&#xA;
                python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext3691744053 ${vrf-name} L2VPN_EVPN ${equal-cluster-length}&#xA;
       </ACTION>
    </COMMAND>
  <COMMAND name="network" help="Enable routing on an IP network">
    <PARAM name="prefix" help="Network number" ptype="IP_ADDR_MASK">
      <PARAM name="backdoor" help="Backdoor" ptype="SUBCOMMAND" mode="subcommand" default="x" optional="true"/>
      <PARAM name="route-map" help="Route-map reference" mode="subcommand" ptype="SUBCOMMAND" optional="true">
        <PARAM name="route-map-name" help="Route map name" ptype="STRING"/>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_network_config ${vrf-name} L2VPN_EVPN ${prefix} ${backdoor} ${route-map-name}</ACTION>
  </COMMAND>
  <COMMAND name="table-map" help="BGP table to RIB route download filter">
    <PARAM name="rtmap" help="Router map name" ptype="STRING"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_config_table_map_name ${vrf-name} L2VPN_EVPN ${rtmap}</ACTION>
  </COMMAND>
  <COMMAND name="aggregate-address" help="Configure BGP aggregate entries">
    <PARAM name="prefix" help="Aggregate prefix" ptype="IP_ADDR_MASK">
      <PARAM name="as-set" help="Generate AS set path information" ptype="SUBCOMMAND" mode="subcommand" optional="true"/>
      <PARAM name="summary-only" help="Filter more specific routes from updates" ptype="SUBCOMMAND" mode="subcommand" optional="true"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_aggregate_address_config ${vrf-name} L2VPN_EVPN ${prefix} ${as-set} ${summary-only}</ACTION>
  </COMMAND>
  <COMMAND name="distance" help="Define an administrative distance"/>
  <COMMAND name="distance bgp" help="Define an administrative distance">
    <PARAM name="external" help="Distance for routes external to the AS" ptype="RANGE_1_255">
      <PARAM name="internal" help="Distance for routes internal to the AS" ptype="RANGE_1_255"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_default_route_distance_config ${vrf-name} L2VPN_EVPN ${external} ${internal}</ACTION>
  </COMMAND>

  <COMMAND name="no" help="no commands"/>
  <COMMAND name="no redistribute" help="Redistribute information from another routing protocol">
    <PARAM name="protocol" help="protocol" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="connected" help="Connected Routes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="static" help="Static Routes" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <PARAM name="route-map" help="Route-map reference" mode="subcommand" ptype="SUBCOMMAND" optional="true">
      <PARAM name="route-map-name" help="Route map name" ptype="STRING"/>
    </PARAM>
    <ACTION> if test -n "${route-map-name}" ; then&#xA;
                 python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_network_instance_network_instances_network_instance_table_connections_table_connection_config_import_policy ${vrf-name} L2VPN_EVPN ${protocol} ${route-map-name}&#xA;
             else&#xA;
                 python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_network_instance_network_instances_network_instance_table_connections_table_connection ${vrf-name} L2VPN_EVPN ${protocol}&#xA;
             fi&#xA;
    </ACTION>
  </COMMAND>
    <COMMAND name="no maximum-paths" help="Forward packets over multiple paths">
      <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_network_instance1348121867 ${vrf-name} L2VPN_EVPN ${paths}</ACTION>
    </COMMAND>
    <COMMAND name="no maximum-paths ibgp" help="iBGP-multipath">
       <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_network_instance1543452951 ${vrf-name} L2VPN_EVPN ${ipaths}&#xA;
                python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext3691744053 ${vrf-name} L2VPN_EVPN&#xA;
       </ACTION>
    </COMMAND>
  <COMMAND name="no network" help="Enable routing on an IP network">
    <PARAM name="prefix" help="Network number" ptype="IP_ADDR">
      <PARAM name="route-map" help="Route-map reference" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_network_config ${vrf-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no table-map" help="BGP table to RIB route download filter">
    <PARAM name="rtmap" help="Number of paths" ptype="STRING" optional="true"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_config_table_map_name ${vrf-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no aggregate-address" help="Configure BGP aggregate entries">
    <PARAM name="prefix" help="Aggregate prefix" ptype="IPV4_IPV6_NETWORK">
      <PARAM name="as-set" help="Generate AS set path information" ptype="SUBCOMMAND" optional="true">
        <PARAM name="summary-only" help="Filter more specific routes from updates" ptype="SUBCOMMAND" optional="true"/>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_aggregate_address_config ${vrf-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no distance" help="Define an administrative distance"/>
  <COMMAND name="no distance bgp" help="Define an administrative distance">
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_global_afi_safis_afi_safi_default_route_distance_config ${vrf-name} L2VPN_EVPN</ACTION>
  </COMMAND>
</VIEW>

<VIEW name="configure-router-bgp-nbr-l2vpn-view" prompt="${SYSTEM_NAME}(config-router-bgp-neighbor-af)# " depth="4">
  <NAMESPACE ref="configure-view" help="false" completion="false" />
  <NAMESPACE ref="configure-router-bgp-view" help="false" completion="false" />
  <NAMESPACE ref="configure-router-bgp-nbr-view" help="false" completion="false" />
  <COMMAND name="activate" help="Enable the Address Family for this Neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_enabled ${vrf-name} ${nbr-addr} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="allowas-in" help="Allow local AS number in as-path">
    <PARAM name="value" help="as-number" ptype="RANGE_1_10">
       <PARAM name="origin" help="Only accept my AS in the as-path if the route was originated in my AS" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_as_count ${vrf-name} ${nbr-addr} L2VPN_EVPN ${value}&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_enabled ${vrf-name} ${nbr-addr} L2VPN_EVPN True&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_origin ${vrf-name} ${nbr-addr} L2VPN_EVPN ${origin}&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="route-map" help="Name of the route map (max 140 chars)">
    <PARAM name="route-name-str" help="route map name" ptype="STRING">
      <PARAM name="direction" help="direction" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routing updates" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routing updates" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION>
          if test "${direction}" = "in" ; then&#xA;
               python $SONIC_CLI_ROOT/sonic-cli-bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_apply_policy_config_import_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${route-name-str}&#xA;
          else&#xA;
               python $SONIC_CLI_ROOT/sonic-cli-bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_apply_policy_config_export_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${route-name-str}&#xA;
          fi&#xA;
    </ACTION>
  </COMMAND>

  <COMMAND name="addpath-tx-all-paths" help="Use addpath to advertise all paths to a neighbor">
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_add_paths_config_tx_all_paths ${vrf-name} ${nbr-addr} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="addpath-tx-bestpath-per-AS" help="Use addpath to advertise the bestpath per each neighboring AS">
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_add_paths_config_tx_bestpath_per_as ${vrf-name} ${nbr-addr} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="as-override" help="Override ASNs in outbound updates if aspath equals remote-as">
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_as_override ${vrf-name} ${nbr-addr} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="attribute-unchanged" help="BGP attribute is propagated unchanged to this neighbor">
    <PARAM name="as-path" help="As-path attribute" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    <PARAM name="med" help="Med attribute" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    <PARAM name="next-hop" help="Nexthop attribute" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_attribute_unchanged_config ${vrf-name} ${nbr-addr} L2VPN_EVPN ${as-path} ${med} ${next-hop}</ACTION>
  </COMMAND>
  <COMMAND name="capability" help="_Advertise capability to the peer"/>
  <COMMAND name="capability orf" help="Advertise ORF capability to the peer"/>
  <COMMAND name="capability orf prefix-list" help="Advertise prefixlist ORF capability to this neighbor">
    <PARAM name="capopt" help="Capabilities" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="send" help="Capability to RECEIVE the ORF from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="receive" help="Capability to SEND the ORF to this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Capability to SEND and RECEIVE the ORF to/from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_capability_orf_config_orf_type ${vrf-name} ${nbr-addr} L2VPN_EVPN ${capopt}</ACTION>
  </COMMAND>
  <COMMAND name="default-originate" help="Originate default route to this neighbor" ref="hidden">
    <PARAM name="route-map" help="Route-map to specify criteria to originate default" mode="subcommand" ptype="SUBCOMMAND">
       <PARAM name="rtemap" help="Route-map name" ptype="STRING"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_default_policy_name ${vrf-name} ${nbr-addr} L2VPN_EVPN ${rtemap}</ACTION>
  </COMMAND>
  <COMMAND name="filter-list" help="Establish BGP filters">
    <PARAM name="fname" help="AS path access-list name" ptype="STRING">
      <PARAM name="filtopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_filter_list_config ${vrf-name} ${nbr-addr} L2VPN_EVPN ${fname} ${filtopt}</ACTION>
  </COMMAND>
  <COMMAND name="next-hop-self" help="Disable the next hop calculation for this neighbor">
    <PARAM name="force" help="Set the next hop to self for reflected routes" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_next_hop_self_config ${vrf-name} ${nbr-addr} L2VPN_EVPN True ${force}</ACTION>
  </COMMAND>
  <COMMAND name="prefix-list" help="Filter updates to/from this neighbor">
    <PARAM name="pname" help="Name of a prefix list" ptype="STRING">
      <PARAM name="prfopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_prefix_list_config ${vrf-name} ${nbr-addr} L2VPN_EVPN ${pname} ${prfopt}</ACTION>
  </COMMAND>
  <COMMAND name="remove-private-AS" help="Remove private ASNs in outbound updates">
    <PARAM name="all" help="Apply to all AS numbers" mode="subcommand" ptype="SUBCOMMAND" order="true" optional="true"/>
    <PARAM name="replace-AS" help="Replace private ASNs with our ASN in outbound updates" mode="subcommand" ptype="SUBCOMMAND" order="true" optional="true"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_remove_private_as_config ${vrf-name} ${nbr-addr} L2VPN_EVPN True ${all} ${replace-AS}</ACTION>
  </COMMAND>
  <COMMAND name="route-reflector-client" help="Configure a neighbor as Route Reflector client">
   <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_route_reflector_client ${vrf-name} ${nbr-addr} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="route-server-client" help="Configure a neighbor as Route Server client">
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_route_server_client ${vrf-name} ${nbr-addr} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="send-community" help="Send Community attribute to this neighbor">
    <PARAM name="comtype" help="Send options" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="standard" help="Send Standard Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="extended" help="Send Extended Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Send Standard and Extended Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_send_community ${vrf-name} ${nbr-addr} L2VPN_EVPN ${comtype}</ACTION>
  </COMMAND>
  <COMMAND name="soft-reconfiguration" help="Per neighbor soft reconfiguration">
    <PARAM name="inbound" help="Allow inbound soft reconfiguration for this neighbor" mode="subcommand" ptype="SUBCOMMAND">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_soft_reconfiguration_in ${vrf-name} ${nbr-addr} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="unsuppress-map" help="Route-map to selectively unsuppress suppressed routes">
    <PARAM name="map" help="Name of route map" ptype="STRING">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_unsuppress_map_name ${vrf-name} ${nbr-addr} L2VPN_EVPN ${map}</ACTION>
  </COMMAND>
  <COMMAND name="weight" help="Set default weight for routes from this neighbor">
    <PARAM name="val" help="Default weight" ptype="RANGE_1_255"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_weight ${vrf-name} ${nbr-addr} L2VPN_EVPN ${val}</ACTION>
  </COMMAND>
  <COMMAND name="maximum-prefix" help="Maximum number of prefixes to accept from this peer">
    <PARAM name="max-prefix-val" help="Maximum no. of prefix limit" ptype="RANGE_1_4294967295">
      <PARAM name="threshold-val" help="Threshold value (%) at which to generate a warning msg" ptype="PERCENT_1" default="0" order="true" optional="true"/>
      <PARAM name="maxpfopt" help="Maximum limit options" mode="switch" ptype="SUBCOMMAND" order="true" optional="true">
        <PARAM name="warning-only" help="Only give warning message when limit is exceeded" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="restart" help="Restart bgp connection after limit is exceeded" mode="subcommand" ptype="SUBCOMMAND">
           <PARAM name="interval" help="Restart interval in minutes" ptype="RANGE_1_65535"/>
        </PARAM>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config ${vrf-name} ${nbr-addr} L2VPN_EVPN ${max-prefix-val} ${threshold-val} ${maxpfopt} ${interval}</ACTION>
  </COMMAND>

  <COMMAND name="no" help="no commands"/>
  <COMMAND name="no activate" help="Disable the Address Family for this Neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_enabled ${vrf-name} ${nbr-addr} L2VPN_EVPN False</ACTION>
  </COMMAND>
  <COMMAND name="no allowas-in" help="Allow local AS number in as-path">
    <PARAM name="value" help="as-number" ptype="RANGE_1_10" optional="true">
     <PARAM name="origin" help="Only accept my AS in the as-path if the route was originated in my AS" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_as_count ${vrf-name} ${nbr-addr} L2VPN_EVPN ${value}&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_enabled ${vrf-name} ${nbr-addr} L2VPN_EVPN False&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_allow_own_as_config_origin ${vrf-name} ${nbr-addr} L2VPN_EVPN&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no route-map" help="Name of the route map (max 140 chars)">
    <PARAM name="route-name-str" help="route map name" ptype="STRING">
      <PARAM name="direction" help="direction" mode="switch" ptype="SUBCOMMAND" optional="true">
        <PARAM name="in" help="Filter incoming routing updates" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
        <PARAM name="out" help="Filter outgoing routing updates" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
      </PARAM>
    </PARAM>
    <ACTION>
          if test "${direction}" = "in" ; then&#xA;
               python $SONIC_CLI_ROOT/sonic-cli-bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_apply_policy_config_import_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${route-name-str}&#xA;
          elif test "${direction}" = "out" ; then&#xA;
               python $SONIC_CLI_ROOT/sonic-cli-bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_apply_policy_config_export_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${route-name-str}&#xA;
          else&#xA;
               python $SONIC_CLI_ROOT/sonic-cli-bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_apply_policy_config_import_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${route-name-str}&#xA;
               python $SONIC_CLI_ROOT/sonic-cli-bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_apply_policy_config_export_policy ${vrf-name} ${nbr-addr} L2VPN_EVPN ${route-name-str}&#xA;
          fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no addpath-tx-all-paths" help="Use addpath to advertise all paths to a neighbor">
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_add_paths_config_tx_all_paths ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no addpath-tx-bestpath-per-AS" help="Use addpath to advertise the bestpath per each neighboring AS">
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_add_paths_config_tx_bestpath_per_as ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no as-override" help="Override ASNs in outbound updates if aspath equals remote-as">
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_as_override ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no attribute-unchanged" help="BGP attribute is propagated unchanged to this neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_attribute_unchanged_config ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no capability" help="Advertise capability to the peer"/>
  <COMMAND name="no capability orf" help="Advertise capability to this neighbor"/>
  <COMMAND name="no capability orf prefix-list" help="Advertise capability to this neighbor">
    <PARAM name="capopt" help="Capabilities" mode="switch" ptype="SUBCOMMAND" optional="true">
      <PARAM name="send" help="Capability to RECEIVE the ORF from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="receive" help="Capability to SEND the ORF to this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Capability to SEND and RECEIVE the ORF to/from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_capability_orf_config_orf_type ${vrf-name} ${nbr-addr} L2VPN_EVPN ${capopt}</ACTION>
  </COMMAND>
  <COMMAND name="no default-originate" help="Originate default route to this neighbor" ref="hidden">
    <PARAM name="route-map" help="Route-map to specify criteria to originate default" mode="subcommand" ptype="SUBCOMMAND">
       <PARAM name="rtemap" help="Route-map name" ptype="STRING"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_default_policy_name ${vrf-name} ${nbr-addr} L2VPN_EVPN ${rtemap}</ACTION>
  </COMMAND>
  <COMMAND name="no filter-list" help="Establish BGP filters">
    <PARAM name="fname" help="AS path access-list name" ptype="STRING">
      <PARAM name="filtopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_filter_list_config ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no next-hop-self" help="Disable the next hop calculation for this neighbor">
    <PARAM name="force" help="Set the next hop to self for reflected routes" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_next_hop_self_config ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no prefix-list" help="Filter updates to/from this neighbor">
    <PARAM name="pname" help="Name of a prefix list" ptype="STRING">
      <PARAM name="prfopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_prefix_list_config ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no remove-private-AS" help="Remove private ASNs in outbound updates">
    <PARAM name="all" help="Apply to all AS numbers" mode="subcommand" ptype="SUBCOMMAND" optional="true">
      <PARAM name="replace-AS" help="Replace private ASNs with our ASN in outbound updates" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_remove_private_as_config ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no route-reflector-client" help="Configure a neighbor as Route Reflector client">
   <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_route_reflector_client ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no route-server-client" help="Configure a neighbor as Route Server client">
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_route_server_client ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no send-community" help="Send Community attribute to this neighbor">
    <PARAM name="cmopt" help="Send options" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="standard" help="Send Standard Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="extended" help="Send Extended Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Send Standard and Extended Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_send_community ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no soft-reconfiguration" help="Per neighbor soft reconfiguration">
    <PARAM name="inbound" help="Allow inbound soft reconfiguration for this neighbor" mode="subcommand" ptype="SUBCOMMAND">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_soft_reconfiguration_in ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no unsuppress-map" help="Route-map to selectively unsuppress suppressed routes">
    <PARAM name="map" help="Name of route map" ptype="STRING">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_unsuppress_map_name ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no weight" help="Set default weight for routes from this neighbor">
    <PARAM name="val" help="Default weight" mode="subcommand" ptype="RANGE_1_255"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_config_weight ${vrf-name} ${nbr-addr} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no maximum-prefix" help="Maximum number of prefixes to accept from this peer">
    <PARAM name="max-prefix-val" help="Maximum no. of prefix limit" mode="subcommand" ptype="RANGE_1_4294967295">
      <PARAM name="mxopt" help="Maximum limit options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="threshold-val" help="Threshold value (%) at which to generate a warning msg" mode="subcommand" ptype="PERCENT_1"/>
        <PARAM name="warning-only" help="Only give warning message when limit is exceeded" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="restart" help="Restart bgp connection after limit is exceeded" mode="subcommand" ptype="SUBCOMMAND">
           <PARAM name="val" help="tbd" ptype="RANGE_1_255"/>
        </PARAM>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_neighbors_neighbor_afi_safis_afi_safi_l2vpn_evpn_config_prefix_limit_config ${vrf-name} ${nbr-addr} L2VPN_EVPN ${max-prefix-val} ${threshold-val} ${warning-only} ${restart} ${val}</ACTION>
  </COMMAND>
</VIEW>

<VIEW name="configure-router-bgp-template-l2vpn-view" prompt="${SYSTEM_NAME}(config-router-bgp-pg-af)# " depth="4">
  <NAMESPACE ref="configure-view" help="false" completion="false" />
  <NAMESPACE ref="configure-router-bgp-view" help="false" completion="false" />
  <NAMESPACE ref="configure-router-bgp-template-view" help="false" completion="false" />
  <COMMAND name="activate" help="Enable the Address Family for this Neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_enabled ${vrf-name} ${template-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="allowas-in" help="Allow local AS number in as-path">
    <PARAM name="value" help="as-number" ptype="RANGE_1_10">
       <PARAM name="origin" help="Only accept my AS in the as-path if the route was originated in my AS" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_as_count ${vrf-name} ${template-name} L2VPN_EVPN ${value}&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_enabled ${vrf-name} ${template-name} L2VPN_EVPN True&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_origin ${vrf-name} ${template-name} L2VPN_EVPN ${origin}&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="route-map" help="Name of the route map (max 140 chars)">
    <PARAM name="route-name-str" help="route map name" ptype="STRING">
      <PARAM name="direction" help="direction" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routing updates" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routing updates" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION>
          if test "${direction}" = "in" ; then&#xA;
               python $SONIC_CLI_ROOT/sonic-cli-bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_apply_policy_config_import_policy ${vrf-name} ${template-name} L2VPN_EVPN ${route-name-str}&#xA;
          else&#xA;
               python $SONIC_CLI_ROOT/sonic-cli-bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_apply_policy_config_export_policy ${vrf-name} ${template-name} L2VPN_EVPN ${route-name-str}&#xA;
          fi&#xA;
    </ACTION>
  </COMMAND>

  <COMMAND name="addpath-tx-all-paths" help="Use addpath to advertise all paths to a neighbor">
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_add_paths_config_tx_all_paths ${vrf-name} ${template-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="addpath-tx-bestpath-per-AS" help="Use addpath to advertise the bestpath per each neighboring AS">
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py PATCH_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_add_paths_config_tx_bestpath_per_as ${vrf-name} ${template-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="as-override" help="Override ASNs in outbound updates if aspath equals remote-as">
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_as_override ${vrf-name} ${template-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="attribute-unchanged" help="BGP attribute is propagated unchanged to this neighbor">
    <PARAM name="as-path" help="As-path attribute" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    <PARAM name="med" help="Med attribute" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    <PARAM name="next-hop" help="Nexthop attribute" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_attribute_unchanged_config ${vrf-name} ${template-name} L2VPN_EVPN ${as-path} ${med} ${next-hop}</ACTION>
  </COMMAND>
  <COMMAND name="capability" help="Advertise capability to the peer"/>
  <COMMAND name="capability orf" help="Advertise capability to this neighbor"/>
  <COMMAND name="capability orf prefix-list" help="Advertise capability to this neighbor">
    <PARAM name="capopt" help="Capabilities" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="send" help="Capability to RECEIVE the ORF from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="receive" help="Capability to SEND the ORF to this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Capability to SEND and RECEIVE the ORF to/from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_capability_orf_config_orf_type ${vrf-name} ${template-name} L2VPN_EVPN ${capopt}</ACTION>
  </COMMAND>
  <COMMAND name="default-originate" help="Originate default route to this neighbor" ref="hidden">
    <PARAM name="route-map" help="Route-map to specify criteria to originate default" mode="subcommand" ptype="SUBCOMMAND">
       <PARAM name="rtemap" help="Route-map name" ptype="STRING"/>
    </PARAM>
    <ACTION builtin="clish_nop"/>
  </COMMAND>
  <COMMAND name="filter-list" help="Establish BGP filters">
    <PARAM name="fname" help="AS path access-list name" ptype="STRING">
      <PARAM name="filtopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_filter_list_config ${vrf-name} ${template-name} L2VPN_EVPN ${fname} ${filtopt}</ACTION>
  </COMMAND>
  <COMMAND name="next-hop-self" help="Disable the next hop calculation for this neighbor">
    <PARAM name="force" help="Set the next hop to self for reflected routes" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_next_hop_self_config ${vrf-name} ${template-name} L2VPN_EVPN True ${force}</ACTION>
  </COMMAND>
  <COMMAND name="prefix-list" help="Filter updates to/from this neighbor">
    <PARAM name="pname" help="Name of a prefix list" ptype="STRING">
      <PARAM name="prfopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_prefix_list_config ${vrf-name} ${template-name} L2VPN_EVPN ${pname} ${prfopt}</ACTION>
  </COMMAND>
  <COMMAND name="remove-private-AS" help="Remove private ASNs in outbound updates">
    <PARAM name="all" help="Apply to all AS numbers" mode="subcommand" ptype="SUBCOMMAND" order="true" optional="true"/>
    <PARAM name="replace-AS" help="Replace private ASNs with our ASN in outbound updates" mode="subcommand" ptype="SUBCOMMAND" order="true" optional="true"/>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_remove_private_as_config ${vrf-name} ${template-name} L2VPN_EVPN True ${all} ${replace-AS}</ACTION>
  </COMMAND>
  <COMMAND name="route-reflector-client" help="Configure a neighbor as Route Reflector client">
   <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_route_reflector_client ${vrf-name} ${template-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="route-server-client" help="Configure a neighbor as Route Server client">
   <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_route_server_client ${vrf-name} ${template-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="send-community" help="Send Community attribute to this neighbor">
    <PARAM name="comtype" help="Send options" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="standard" help="Send Standard Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="extended" help="Send Extended Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Send Standard and Extended Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_send_community ${vrf-name} ${template-name} L2VPN_EVPN ${comtype}</ACTION>
  </COMMAND>
  <COMMAND name="soft-reconfiguration" help="Per neighbor soft reconfiguration">
    <PARAM name="inbound" help="Allow inbound soft reconfiguration for this neighbor" mode="subcommand" ptype="SUBCOMMAND">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_soft_reconfiguration_in ${vrf-name} ${template-name} L2VPN_EVPN True</ACTION>
  </COMMAND>
  <COMMAND name="unsuppress-map" help="Route-map to selectively unsuppress suppressed routes">
    <PARAM name="map" help="Name of route map" ptype="STRING">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_unsuppress_map_name ${vrf-name} ${template-name} L2VPN_EVPN ${map}</ACTION>
  </COMMAND>
  <COMMAND name="weight" help="Set default weight for routes from this neighbor">
    <PARAM name="val" help="Default weight" ptype="RANGE_1_255"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_weight ${vrf-name} ${template-name} L2VPN_EVPN ${val}</ACTION>
  </COMMAND>
  <COMMAND name="maximum-prefix" help="Maximum number of prefixes to accept from this peer">
    <PARAM name="max-prefix-val" help="Maximum no. of prefix limit" ptype="RANGE_1_4294967295">
      <PARAM name="threshold-val" help="Threshold value (%) at which to generate a warning msg" ptype="PERCENT_1" default="0" order="true" optional="true"/>
      <PARAM name="maxpfopt" help="Maximum limit options" mode="switch" ptype="SUBCOMMAND" order="true" optional="true">
        <PARAM name="warning-only" help="Only give warning message when limit is exceeded" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="restart" help="Restart bgp connection after limit is exceeded" mode="subcommand" ptype="SUBCOMMAND">
           <PARAM name="interval" help="Restart interval in minutes" ptype="RANGE_1_65535"/>
        </PARAM>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py PATCH_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_unicast_config_prefix_limit_config ${vrf-name} ${template-name} L2VPN_EVPN ${max-prefix-val} ${threshold-val} ${warning-only} ${maxpfopt} ${interval}</ACTION>
  </COMMAND>

  <COMMAND name="no" help="no commands"/>
  <COMMAND name="no activate" help="Disable the Address Family for this Neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py patch_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_enabled ${vrf-name} ${template-name} L2VPN_EVPN False</ACTION>
  </COMMAND>
  <COMMAND name="no allowas-in" help="Allow local AS number in as-path">
    <PARAM name="value" help="as-number" ptype="RANGE_1_10" optional="true">
     <PARAM name="origin" help="Only accept my AS in the as-path if the route was originated in my AS" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_as_count ${vrf-name} ${template-name} L2VPN_EVPN ${value}&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_enabled ${vrf-name} ${template-name} L2VPN_EVPN False&#xA;
             python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_allow_own_as_config_origin ${vrf-name} ${template-name} L2VPN_EVPN&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no route-map" help="Name of the route map (max 140 chars)">
    <PARAM name="route-name-str" help="route map name" ptype="STRING">
      <PARAM name="direction" help="direction" mode="switch" ptype="SUBCOMMAND" optional="true">
        <PARAM name="in" help="Filter incoming routing updates" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
        <PARAM name="out" help="Filter outgoing routing updates" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
      </PARAM>
    </PARAM>
    <ACTION>
          if test "${direction}" = "in" ; then&#xA;
               python $SONIC_CLI_ROOT/sonic-cli-bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_apply_policy_config_import_policy ${vrf-name} ${template-name} L2VPN_EVPN ${route-name-str}&#xA;
          elif test "${direction}" = "out" ; then&#xA;
               python $SONIC_CLI_ROOT/sonic-cli-bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_apply_policy_config_export_policy ${vrf-name} ${template-name} L2VPN_EVPN ${route-name-str}&#xA;
          else&#xA;
               python $SONIC_CLI_ROOT/sonic-cli-bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_apply_policy_config_import_policy ${vrf-name} ${template-name} L2VPN_EVPN ${route-name-str}&#xA;
               python $SONIC_CLI_ROOT/sonic-cli-bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_apply_policy_config_export_policy ${vrf-name} ${template-name} L2VPN_EVPN ${route-name-str}&#xA;
          fi&#xA;
    </ACTION>
  </COMMAND>
  <COMMAND name="no addpath-tx-all-paths" help="Use addpath to advertise all paths to a neighbor">
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_add_paths_config_tx_all_paths ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no addpath-tx-bestpath-per-AS" help="Use addpath to advertise the bestpath per each neighboring AS">
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py DELETE_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_add_paths_config_tx_bestpath_per_as ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no as-override" help="Override ASNs in outbound updates if aspath equals remote-as">
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_as_override ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no attribute-unchanged" help="BGP attribute is propagated unchanged to this neighbor">
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_attribute_unchanged_config ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no capability" help="Advertise capability to the peer"/>
  <COMMAND name="no capability orf" help="Advertise capability to this neighbor"/>
  <COMMAND name="no capability orf prefix-list" help="Advertise capability to this neighbor">
    <PARAM name="capopt" help="Capabilities" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="send" help="Capability to RECEIVE the ORF from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="receive" help="Capability to SEND the ORF to this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Capability to SEND and RECEIVE the ORF to/from this neighbor" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_capability_orf_config_orf_type ${vrf-name} ${template-name} L2VPN_EVPN ${capopt}</ACTION>
  </COMMAND>
  <COMMAND name="no default-originate" help="Originate default route to this neighbor" ref="hidden">
    <PARAM name="route-map" help="Route-map to specify criteria to originate default" mode="subcommand" ptype="SUBCOMMAND">
       <PARAM name="rtemap" help="Route-map name" ptype="STRING"/>
    </PARAM>
    <ACTION builtin="clish_nop"/>
  </COMMAND>
  <COMMAND name="no filter-list" help="Establish BGP filters">
    <PARAM name="fname" help="AS path access-list name" ptype="STRING">
      <PARAM name="filtopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_filter_list_config ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no next-hop-self" help="Disable the next hop calculation for this neighbor">
    <PARAM name="force" help="Set the next hop to self for reflected routes" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_next_hop_self_config ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no prefix-list" help="Filter updates to/from this neighbor">
    <PARAM name="pname" help="Name of a prefix list" ptype="STRING">
      <PARAM name="prfopt" help="Filter options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="in" help="Filter incoming routes" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="out" help="Filter outgoing routes" mode="subcommand" ptype="SUBCOMMAND"/>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_prefix_list_config ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no remove-private-AS" help="Remove private ASNs in outbound updates">
    <PARAM name="all" help="Apply to all AS numbers" mode="subcommand" ptype="SUBCOMMAND" optional="true">
      <PARAM name="replace-AS" help="Replace private ASNs with our ASN in outbound updates" mode="subcommand" ptype="SUBCOMMAND" optional="true"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_remove_private_as_config ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no route-reflector-client" help="Configure a neighbor as Route Reflector client">
   <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_route_reflector_client ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no route-server-client" help="Configure a neighbor as Route Server client">
   <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_route_server_client ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>   
  </COMMAND>
  <COMMAND name="no send-community" help="Send Community attribute to this neighbor">
    <PARAM name="cmopt" help="Send options" mode="switch" ptype="SUBCOMMAND">
      <PARAM name="standard" help="Send Standard Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="extended" help="Send Extended Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
      <PARAM name="both" help="Send Standard and Extended Community attributes" mode="subcommand" ptype="SUBCOMMAND"/>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_send_community ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no soft-reconfiguration" help="Per neighbor soft reconfiguration">
    <PARAM name="inbound" help="Allow inbound soft reconfiguration for this neighbor" mode="subcommand" ptype="SUBCOMMAND">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_soft_reconfiguration_in ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no unsuppress-map" help="Route-map to selectively unsuppress suppressed routes">
    <PARAM name="map" help="Name of route map" ptype="STRING">
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_unsuppress_map_name ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no weight" help="Set default weight for routes from this neighbor">
    <PARAM name="val" help="Default weight" mode="subcommand" ptype="RANGE_1_255"/>
     <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py delete_openconfig_bgp_ext_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_config_weight ${vrf-name} ${template-name} L2VPN_EVPN</ACTION>
  </COMMAND>
  <COMMAND name="no maximum-prefix" help="Maximum number of prefixes to accept from this peer">
    <PARAM name="max-prefix-val" help="Maximum no. of prefix limit" mode="subcommand" ptype="RANGE_1_4294967295">
      <PARAM name="mxopt" help="Maximum limit options" mode="switch" ptype="SUBCOMMAND">
        <PARAM name="threshold-val" help="Threshold value (%) at which to generate a warning msg" mode="subcommand" ptype="PERCENT_1"/>
        <PARAM name="warning-only" help="Only give warning message when limit is exceeded" mode="subcommand" ptype="SUBCOMMAND"/>
        <PARAM name="restart" help="Restart bgp connection after limit is exceeded" mode="subcommand" ptype="SUBCOMMAND">
           <PARAM name="val" help="tbd" ptype="RANGE_1_255"/>
        </PARAM>
      </PARAM>
    </PARAM>
    <ACTION> python $SONIC_CLI_ROOT/sonic-cli-bgp.py DELETE_openconfig_network_instance_network_instances_network_instance_protocols_protocol_bgp_peer_groups_peer_group_afi_safis_afi_safi_l2vpn_evpn_unicast_config_prefix_limit_config ${vrf-name} ${template-name} L2VPN_EVPN ${max-prefix-val} ${threshold-val} ${warning-only} ${restart} ${val}</ACTION>
  </COMMAND>
</VIEW>

</CLISH_MODULE>

