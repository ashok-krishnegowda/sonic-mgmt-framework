<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE CLISH_MODULE [
]>
<CLISH_MODULE xmlns="http://www.dellemc.com/sonic/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xi="http://www.w3.org/2001/XInclude" xsi:schemaLocation="http://www.dellemc.com/sonic/XMLSchema http://www.dellemc.com/sonic/XMLSchema/clish.xsd">
  <!--=========================================================================-->
  <VIEW name="enable-view">

    <!--show ecn -->
    <COMMAND name="show wred" help="Show configured WRED profiles">
      <ACTION> python $SONIC_CLI_ROOT/sonic-cli-wred.py get_sonic_wred_profile_sonic_wred_profile show_wred.j2 </ACTION>
      <xi:include href="include/pipe.xml"/>
    </COMMAND>

  </VIEW>
  <VIEW name="configure-view">
    <!-- ecn -->
    <COMMAND
        name="wred"
        help="ECN Configuration"
        mode="subcommand"
        ptype="SUBCOMMAND"
        view="configure-prof-view"
        viewid="prof_id=${name}"
        >
        <PARAM
                name="name"
                help="WRED Profile"
                ptype="STRING_32"
                >
        </PARAM>
        <ACTION>python $SONIC_CLI_ROOT/sonic-cli-wred.py patch_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list ${name}</ACTION>
    </COMMAND>

    <!-- no ecn -->
    <COMMAND name="no wred" help="Unconfigure a WRED profile">
      <PARAM name="name" help="Name of the WRED profile" ptype="STRING_32"> </PARAM>
      <ACTION> python $SONIC_CLI_ROOT/sonic-cli-wred.py delete_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list ${name} </ACTION>
    </COMMAND>

  </VIEW>

<VIEW
    name="configure-prof-view"
    prompt="${SYSTEM_NAME}(conf-wred-${prof_id})# "
    depth="2"
    >
    <!-- Inheritance -->
    <NAMESPACE
        ref="configure-view"
        help="false"
        completion="false"
        />

        <COMMAND
            name="random-detect"
            help="WRED configuration"/>
        <COMMAND
            name="random-detect color"
            help="Specify WRED parameters"
            mode="subcommand"
            ptype="SUBCOMMAND">
            <PARAM
                name="color_select"
                help="Select color"
                mode="switch"
                ptype="SUBCOMMAND">
                <PARAM
                    name="green"
                    help="Green drop precedence"
                    mode="subcommand"
                    ptype="SUBCOMMAND"
                    >
                    <MACRO name="WRED_THD_CONFIG" arg=""/>
                </PARAM>
                <PARAM
                    name="yellow"
                    help="Yellow drop precedence"
                    mode="subcommand"
                    ptype="SUBCOMMAND"
                    >
                    <MACRO name="WRED_THD_CONFIG" arg=""/>
                </PARAM>
                <PARAM
                    name="red"
                    help="Red drop precedence"
                    mode="subcommand"
                    ptype="SUBCOMMAND"
                    >
                    <MACRO name="WRED_THD_CONFIG" arg=""/>
                </PARAM>
            </PARAM>
            <ACTION>
                if test "${color_select}" = "red" ; then&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py patch_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_red_min_threshold ${prof_id} ${min-threshold}&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py patch_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_red_max_threshold ${prof_id} ${max-threshold}&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py patch_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_red_drop_rate ${prof_id} ${max-drop-rate} OK&#xA;
                elif test "${color_select}" = "green" ; then&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py patch_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_green_min_threshold ${prof_id} ${min-threshold}&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py patch_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_green_max_threshold ${prof_id} ${max-threshold}&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py patch_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_green_drop_rate ${prof_id} ${max-drop-rate} OK&#xA;
                else&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py patch_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_yellow_min_threshold ${prof_id} ${min-threshold}&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py patch_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_yellow_max_threshold ${prof_id} ${max-threshold}&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py patch_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_yellow_drop_rate ${prof_id} ${max-drop-rate} OK&#xA;
                fi&#xA;
            </ACTION>
        </COMMAND>
<!-- FIXME
        <COMMAND
            name="random-detect ecn"
            help="Enable ECN"
            <PARAM
                name="ecn_thr_select"
                help="Choose ecn cb threshold"
                mode="switch"
                ptype="SUBCOMMAND"
                >
                <PARAM
                    name="green"
                    help="Green"
                    >
                </PARAM>
                <PARAM
                    name="yellow"
                    help="Yellow precedence"
                    >
                </PARAM>
                <PARAM
                    name="red"
                    help="Red"
                    >
                    <MACRO name="WRED_THD_CONFIG" arg=""/>
                </PARAM>
            </PARAM>
            <ACTION> python $SONIC_CLI_ROOT/sonic-cli-wred.py get_sonic_wred_profile_sonic_wred_profile show_wred.j2 </ACTION>
        </COMMAND>
FIXME -->
        <COMMAND
            name="no"
            help="Delete WRED profile">
        </COMMAND>
        <COMMAND
            name="no random-detect"
            help="Delete WRED parameters">
        </COMMAND>
        <COMMAND
            name="no random-detect color"
            help="Specify WRED parameters"
            mode="subcommand"
            ptype="SUBCOMMAND">
            <PARAM
                name="color_select"
                help="Select color"
                mode="switch"
                ptype="SUBCOMMAND">
                <PARAM
                    name="green"
                    help="Green drop precedence"
                    mode="subcommand"
                    ptype="SUBCOMMAND"
                    >
                </PARAM>
                <PARAM
                    name="yellow"
                    help="Yellow drop precedence"
                    mode="subcommand"
                    ptype="SUBCOMMAND"
                    >
                </PARAM>
                <PARAM
                    name="red"
                    help="Red drop precedence"
                    mode="subcommand"
                    ptype="SUBCOMMAND"
                    >
                </PARAM>
            </PARAM>
            <ACTION>
                if test "${color_select}" = "red" ; then&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py delete_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_red_min_threshold ${prof_id}&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py delete_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_red_max_threshold ${prof_id}&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py delete_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_red_drop_rate ${prof_id} OK&#xA;
                elif test "${color_select}" = "green" ; then&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py delete_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_green_min_threshold ${prof_id}&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py delete_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_green_max_threshold ${prof_id}&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py delete_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_green_drop_rate ${prof_id} OK&#xA;
                else&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py delete_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_yellow_min_threshold ${prof_id}&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py delete_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_yellow_max_threshold ${prof_id}&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-wred.py delete_sonic_wred_profile_sonic_wred_profile_wred_profile_wred_profile_list_yellow_drop_rate ${prof_id} OK&#xA;
                fi&#xA;
            </ACTION>
        </COMMAND>
<!-- FIXME
        <COMMAND
            name="no random-detect ecn"
            help="Enable ECN"
            mode="subcommand"
            ptype="SUBCOMMAND">
            <PARAM
                name="ecn_thr_select"
                help="Choose ecn cb threshold"
                mode="switch"
                ptype="SUBCOMMAND"
                >
            </PARAM>
            <ACTION> python $SONIC_CLI_ROOT/sonic-cli-wred.py get_sonic_wred_profile_sonic_wred_profile show_wred.j2 </ACTION>
        </COMMAND>
FIXME -->
    </VIEW>
</CLISH_MODULE>

