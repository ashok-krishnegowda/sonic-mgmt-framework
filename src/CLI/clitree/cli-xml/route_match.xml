<?xml version="1.0" encoding="UTF-8"?>
<!--
Copyright 2019 Dell, Inc.  

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
--> 

<CLISH_MODULE
    xmlns="http://www.dellemc.com/sonic/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:schemaLocation="http://www.dellemc.com/sonic/XMLSchema
                        http://www.dellemc.com/sonic/XMLSchema/clish.xsd"
    >
    <!--=======================================================-->


<VIEW name="configure-route-map-view">


<!-- Inheritance -->

  

    <COMMAND name="no" help="Negate a  commands"/>
    <COMMAND name="no match" help="Negate a  commands"/>
    <COMMAND name="no match interface" help="delete matched interface">
      <ACTION> python $SONIC_CLI_ROOT/sonic-route-map.py delete_openconfig_routing_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_match_interface_config_interface ${name} ${seq_num}
     </ACTION>
    </COMMAND>
    <COMMAND name="no match tag" help="delete matched tag">
      <ACTION> python $SONIC_CLI_ROOT/sonic-route-map.py delete_openconfig_routing_policy_ext_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_match_tag_set_config_tag_value ${name} ${seq_num}
     </ACTION>
    </COMMAND>

    <COMMAND name="no match as-path-name" help="delete matched as-path-name">
      <ACTION> python $SONIC_CLI_ROOT/sonic-route-map.py delete_openconfig_bgp_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_bgp_conditions_match_as_path_set_config_as_path_set ${name} ${seq_num}
     </ACTION>
    </COMMAND>

    <COMMAND name="no match community" help="delete matched community">

      <ACTION> python $SONIC_CLI_ROOT/sonic-route-map.py delete_openconfig_bgp_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_bgp_conditions_config_community_set ${name} ${seq_num}
     </ACTION>
    </COMMAND>

    <COMMAND name="no match ext-community" help="delete matched external community">

      <ACTION> python $SONIC_CLI_ROOT/sonic-route-map.py delete_openconfig_bgp_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_bgp_conditions_config_ext_community_set ${name} ${seq_num}
     </ACTION>
    </COMMAND>

    <COMMAND name="no match origin" help="delete matched origin">

      <ACTION> python $SONIC_CLI_ROOT/sonic-route-map.py delete_openconfig_bgp_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_bgp_conditions_config_origin_eq ${name} ${seq_num}
     </ACTION>
    </COMMAND>

    <COMMAND name="no match ip" help="Negate a  commands"/>
    <COMMAND name="no match ip address" help="Negate a  commands"/>
    <COMMAND name="no match ipv6" help="Negate a  commands"/>
    <COMMAND name="no match ipv6 address" help="Negate a  commands"/>

    <COMMAND name="no match ip address prefix-list" help="delete matched ip address prefix">
      <ACTION> python $SONIC_CLI_ROOT/sonic-route-map.py delete_openconfig_routing_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_match_prefix_set_config_prefix_set ${name} ${seq_num}
      </ACTION>
    </COMMAND>
    
    <COMMAND name="no match ipv6 address prefix-list" help="delete matched ipv6 address prefix">
      <ACTION> python $SONIC_CLI_ROOT/sonic-route-map.py delete_openconfig_routing_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_match_prefix_set_config_prefix_set
 ${name} ${seq_num}
      </ACTION>
    </COMMAND>

    <COMMAND
        name="match"
        help="Set routing policy match criteria"
    />

    <COMMAND
        name="match as-path"
        help="Set routing policy match criteria as-path"
        >
        <PARAM name="as-path-name"
                     help="Name of as-path-name (Max size 63)"
                     ptype="STRING_63"
        />
        <ACTION>
           python $SONIC_CLI_ROOT/sonic-route-map.py patch_openconfig_bgp_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_bgp_conditions_match_as_path_set_config_as_path_set ${name} ${seq_num} ${as-path-name} &#xA;
        </ACTION>
    </COMMAND>


    <COMMAND
        name="match ip"
        help="Set routing policy match criteria"
    />
    <COMMAND
        name="match ipv6"
        help="Set routing policy match criteria"
    />
    <COMMAND
        name="match ip address"
        help="Set routing policy match criteria"
    />
    <COMMAND
        name="match ipv6 address"
        help="Set routing policy match criteria"
    />

    <COMMAND 
        name="match ip address prefix-list" 
        help="Set routing policy match criteria to ipv4 prefix-list"
        >
        <PARAM name="prefix-list-name"
                     help="Name of prefis-list (Max size 63)"
                     ptype="STRING_63"
        />
        <ACTION>
           python $SONIC_CLI_ROOT/sonic-route-map.py patch_openconfig_routing_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_match_prefix_set_config_prefix_set ${name} ${seq_num} ${prefix-list-name} &#xA;
        </ACTION>
    </COMMAND>

    <COMMAND 
        name="match ipv6 address prefix-list"
        help="Set routing policy match criteria to ipv6 prefix-list"
        >
        <PARAM name="prefix-list-name"
                     help="Name of route map (Max size 63)"
                     ptype="STRING_63"
        />
       <ACTION>
           python $SONIC_CLI_ROOT/sonic-route-map.py patch_openconfig_routing_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_match_prefix_set_config_prefix_set ${name} ${seq_num} ${prefix-list-name} &#xA;
       </ACTION>
    </COMMAND>

    

    <COMMAND
        name="match interface"
        help="Set routing policy match criteria to interface"
        >
        <PARAM name="intf-name"
                     help="Name of interface (Max size 63)"
                     ptype="STRING_63"
        />
       <ACTION>
           python $SONIC_CLI_ROOT/sonic-route-map.py patch_openconfig_routing_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_match_interface_config_interface ${name} ${seq_num} ${intf-name} &#xA;
       </ACTION>
    </COMMAND>

   <COMMAND
        name="match community"
        help="Set routing policy match criteria to BGP community"
        >
        <PARAM name="community-name"
                     help="Name of community (Max size 63)"
                     ptype="STRING_63"
        />
        <ACTION>
           python $SONIC_CLI_ROOT/sonic-route-map.py patch_openconfig_bgp_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_bgp_conditions_config_community_set ${name} ${seq_num} ${community-name} &#xA;
        </ACTION>
    </COMMAND>

    <COMMAND
        name="match ext-community"
        help="Set routing policy match criteria to BGP external community"
        >
        <PARAM name="community-name"
                     help="Name of external community (Max size 63)"
                     ptype="STRING_63"
        />
        <ACTION>
           python $SONIC_CLI_ROOT/sonic-route-map.py  patch_openconfig_bgp_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_bgp_conditions_config_ext_community_set ${name} ${seq_num} ${community-name} &#xA;
        </ACTION>
    </COMMAND>

    <COMMAND
        name="match tag"
        help="redistributes routes in the routing table that match the specified tags."
        >
        <PARAM name="match-tag"
                     help="tag number"
                     ptype="UINT"
        />
       <ACTION>
           <!-- TODO : CK SUCHETA PATCH_FUNCT -->
           python $SONIC_CLI_ROOT/sonic-route-map.py patch_openconfig_routing_policy_ext_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_match_tag_set_config_tag_value  ${name} ${seq_num} ${match-tag}

       </ACTION>
    </COMMAND>

    <COMMAND
         name="match origin"
         help="Specify BGP origin"
         >
         <PARAM name="action-switch"
            help="Configure the BGP origin"
            ptype="SUBCOMMAND"
            mode="switch"
            >

            <PARAM name="egp"
                help="Exterior Gateway protocol"
                ptype="SUBCOMMAND"
                mode="subcommand"
                                />

            <PARAM name="igp"
                help="Interior Gateway protocol"
                ptype="SUBCOMMAND"
                mode="subcommand"
                                />

           <PARAM name="incomplete"
                help="Incomplete"
                ptype="SUBCOMMAND"
                mode="subcommand"
                                />
        </PARAM>

    <ACTION>
        if test "${action-switch}" = "egp"; then&#xA;
            python $SONIC_CLI_ROOT/sonic-route-map.py patch_openconfig_bgp_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_bgp_conditions_config_origin_eq  ${name} ${seq_num} EGP&#xA;
        elif test "${action-switch}" = "igp"; then&#xA;
            python $SONIC_CLI_ROOT/sonic-route-map.py patch_openconfig_bgp_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_bgp_conditions_config_origin_eq ${name} ${seq_num} IGP&#xA;
        else&#xA;
            python $SONIC_CLI_ROOT/sonic-route-map.py patch_openconfig_bgp_policy_routing_policy_policy_definitions_policy_definition_statements_statement_conditions_bgp_conditions_config_origin_eq ${name} ${seq_num} INTERNAL&#xA;
        fi&#xA;

    </ACTION>
    </COMMAND>

    


    

</VIEW>
</CLISH_MODULE>


